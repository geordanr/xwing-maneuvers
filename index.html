<!DOCTYPE html><html><head><title>X-Wing Maneuvers</title><link rel="stylesheet" href="stylesheets/main.css"></head><body><div id="stage"></div><script src="javascripts/jquery-2.1.1.min.js"></script><script src="javascripts/kinetic-v5.1.0.min.js"></script><script src="javascripts/constants.js"></script><script src="javascripts/position.js"></script><script src="javascripts/base.js"></script><script src="javascripts/template.js"></script><script src="javascripts/movement.js"></script><script src="javascripts/demo.js"></script><script src="javascripts/grid.js"></script><script defer="defer">(function() {
  var b1, b2, b3, b4, layer, p, t, xform;

  window.stage = new Kinetic.Stage({
    container: 'stage',
    width: 914,
    height: 914
  });

  drawGridOn(stage);

  layer = new Kinetic.Layer();

  stage.add(layer);

  b1 = new Base({
    size: 'small',
    position: new Position({
      center_x: 100,
      center_y: 200,
      heading_deg: 45
    })
  });

  b1.draw(layer, {
    stroke: 'red'
  });

  b2 = new Base({
    size: 'large',
    position: new Position({
      center_x: 200,
      center_y: 300,
      heading_deg: 112
    })
  });

  b2.draw(layer, {
    stroke: 'green'
  });

  b3 = new Base({
    size: 'small',
    position: new Position({
      center_x: 300,
      center_y: 100,
      heading_deg: 270
    })
  });

  b3.draw(layer, {
    stroke: 'blue'
  });

  t = new templates.Straight({
    speed: 3,
    base: b2,
    where: 'front_nubs'
  });

  t.draw(layer, {
    stroke: 'purple'
  });

  xform = new movements.Straight({
    speed: 3
  }).getBaseTransform(b2);

  p = xform.point({
    x: 0,
    y: 0
  });

  console.log(p);

  b4 = new Base({
    size: 'large',
    position: new Position({
      center_x: p.x,
      center_y: p.y,
      heading_deg: 112
    })
  });

  b4.draw(layer, {
    stroke: 'orange'
  });

}).call(this);
</script></body></html>